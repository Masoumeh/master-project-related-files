import module namespace geo-index = "http://expath.org/ns/GeoIndex";
import module namespace geo = "http://expath.org/ns/Geo";
declare namespace gml="http://www.opengis.net/gml";

let $a:= <gml:Polygon>
              <gml:outerBoundaryIs>
                <gml:LinearRing>
                  <gml:coordinates decimal="." cs="," ts=" ">88289.4063,401843.5 88784.2031,401579.8125 89172,401373.8125 89164.7031,401354.6875 89033.4063,401008.1875 89207.0938,401049.1875 89331.7969,401070.6875 89454.4063,401077.6875 89547.0938,401064.9063 89613.7969,401069.6875 89673.2031,401115.8125 89776.5,401081.4063 89976.0938,401023.0938 89946,400985.4063 140000,400954.3125 140066.2969,400920.9063 140321.5,400841.1875 140583.2031,400751.5 140750,400706.6875 140834.2969,400918.8125 141050.2969,400858 141093.7031,400965.6875 141242.0938,400948.5 141253.7656,400946.1875 141230.75,400891.2188 141189.6563,400785.0938 141146.8594,400671.75 141092.6094,400529.75 141068.2031,400469.5938 141066.0156,400452.7188 141026.9688,400359.5 141002.4063,400296.8125 140970.6406,400206.7813 140909.5625,400053.3438 140931.4531,400051.5 140859.6719,459878.5 140691.8906,459459.5313 140689.1719,459452.1875 140646.3281,459336.1563 140545.8906,459072.25 140465.4375,458864.0938 140402.3906,458685.4375 140327.1563,458496.5625 140255.5,458523.625 140222.0156,458435.9688 140190,458472.6875 140129.7969,458521.5938 140056.4063,458567.6875 140000,458606.6875 89576.4063,458780.9063 89094.7031,458953.9063 88744.2031,459052.9063 88630.8082,459088.7893 88628.4,459091.7 88590.3,459125.3 88567.2,459140 88566.6,459140.3 88556.3,459146.7 88543.3,459156.5 88539.8,459157.4 88530.7,459159.9 88325.3,459215.6 88322.3,459213.2 88273.2,459189.5 88268.5,459193.3 88254.3,459205 88249.6,459208.9 88248.4,459206.1 88233.9,459171.8 88233.6,459170.9 88228.9,459160.6 88227.7,459157.7 88220.7,459137 88220.4,459136.4 88202.1,459143.6 88198.9,459163.5 88198.6,459165.4 88195.4,459184.8 88195.3,459185.5 88194.8,459190.5 88194.8,459206.3 88196.3,459217.3 88199.7,459226.1 88198.1,459226.6 88196.7,459227.1 88182.9,459231.9 88175,459234.6 88175.5,459235.8 88175.6,459236.2 88176.2,459237.9 88177.4,459241 88178.3,459243.3 88179.3,459245.9 88172,459247.9 88171.9,459247.9 88171,459248.1 88147.1,459223.8 88080.9,459180.2 88084.6,459190.6 88097.1,459225.9 88058.2,459242.7 88054.8,459244.2 88054.4,459244.4 88050.4,459246.1 88033.6,459253.3 87991.1,459271.6 87929.9,459297.8 87928.7,459298.3 87887.2,459316.2 87864.8,459325.8 87864,459326.1 87844.9,459334.3 87844.8,459334.4 87824.5,459343.1 87802.6,459352.3 87780.7,459362 87740,459379.7 87697.3,459396.8 87657.3,459413.7 87655.4,459414.5 87653.5,459415.3 87613.4,459432.5 87613,459432.7 87591.9,459441.8 87568.9,459451.6 87549.4,459460 87509.5,459477.1 87508.2,459477.7 87507.3,459478.1 87499.4,459481.5 87465.4,459496.2 87443.8,459505.5 87422.9,459514.8 87422.5,459515 87400.2,459524.2 87358.1,459542.4 87317.9,459559.7 87274.7,459578.3 87274.3,459578.4 87247.4,459590 87211.8,459605.3 87211.3,459605.5 87178.6,459619 87150.1,459630.4 87148.4,459631 87140.1208,459637.0466 87522.9063,400550.9063 87612.7031,400750.3125 87690,400911.0938 87734.5938,401008 87815.4063,401120.5938 87925,401249.5 88016.7031,401381.9063 88147.0938,401580.9063 88266.7969,401798.5938 88289.4063,401843.5</gml:coordinates>
                </gml:LinearRing>
              </gml:outerBoundaryIs>
            </gml:Polygon>

return (
  geo-index:intersects("neighbourhoods", $a),
  geo:time()
)

(:
for $node in geo-index:visitor("neighbourhoods", $a)
where geo:intersects( $a, $node)
return $node

 let $list := geo-index:visitor("neighbourhoods", $a)
        for $visit in $list
return if (geo:intersects( $a, $visit) ) then $visit else ()
:)
